(function(){"use strict";var t=function t(){var t=0,e=null,n=new Audio("media/beep.ogg");n.loop=!0,this.startAlarm=function(){t++,console.log(t),2>t&&(n.play(),navigator.vibrate&&r())},this.stopAlarm=function(){t>0&&t--,console.log(t),0===t&&(n.pause(),n.currentTime=0,navigator.vibrate&&a())};var i=function i(){navigator.vibrate(200)},a=function a(){window.clearInterval(e),navigator.vibrate(0)},r=function r(){e=window.setInterval(i,1e3)}},e=new t,n=function n(t,n){this.time=0,this.status="off",this.elDisplay=t,this.elButton=n;var i=null,a=this;this.start=function(t){l(t),a.status="ticking",e.stopAlarm(),s()},this.stop=function(){u(),a.status="off",s()},this.dismissAlarm=function(){"alarm"===a.status&&(a.status="off",s())};var r=function r(){a.time--,0===a.time&&(u(),a.status="alarm"),s()},l=function l(t){a.time=t,i=window.setInterval(r,1e3)},u=function u(){a.time=0,window.clearInterval(i)},o=function o(){var t=Math.floor(a.time/3600),e=Math.floor((a.time-3600*t)/60),n=a.time-3600*t-60*e;return 10>t&&(t="0"+t),10>e&&(e="0"+e),10>n&&(n="0"+n),t+":"+e+":"+n},s=function s(){switch(c(),a.elDisplay.textContent=o(),a.status){case"ticking":a.elButton.innerHTML="Stop",a.elDisplay.classList.remove("finished");break;case"alarm":a.elButton.innerHTML="Start",a.elDisplay.classList.add("finished"),e.startAlarm();break;case"off":a.elButton.innerHTML="Start",a.elDisplay.classList.remove("finished"),e.stopAlarm();break;default:alert("Something went wrong")}},c=function c(){console.log("Timer: "+a.status+", remaining "+o())}};document.onreadystatechange=function(){if("interactive"===document.readyState){var t=document.getElementById("hplus"),e=document.getElementById("hminus"),i=document.getElementById("hours"),a=document.getElementById("mplus"),r=document.getElementById("mminus"),l=document.getElementById("mins"),u=document.getElementById("splus"),o=document.getElementById("sminus"),s=document.getElementById("secs"),c=document.getElementById("btn1"),m=document.getElementById("btn2"),d=document.getElementById("btn3"),v=document.getElementById("timer1"),f=document.getElementById("timer2"),g=document.getElementById("timer3"),E=new n(v,c),h=new n(f,m),w=new n(g,d),y=function y(){var t=Number(i.value)+1;i.value=t>23?0:t},b=function b(){var t=Number(i.value)-1;i.value=0>t?23:t},p=function p(){var t=Number(l.value)+1;l.value=t>59?0:t},I=function I(){var t=Number(l.value)-1;l.value=0>t?59:t},L=function L(){var t=Number(s.value)+1;s.value=t>59?0:t},B=function B(){var t=Number(s.value)-1;s.value=0>t?59:t},k=function k(){var t=3600*Number(i.value)+60*Number(l.value)+Number(s.value);return t},N=function N(t){var e=Number(t),n=0,a=0,r=0;n=Math.floor(e/3600),a=Math.floor((e-3600*n)/60),r=e-3600*n-60*a,i.value=n,l.value=a,s.value=r},S=function S(t){var e=t.target.timer;"ticking"===e.status?e.stop():k()?(e.start(k()),window.localStorage&&window.localStorage.setItem("last",k())):alert("Select time first")},A=function A(t){var e=t.target.timer;e.dismissAlarm()},M=function M(){this.value.length>2&&(this.value=this.value.slice(0,2))};if(c.timer=v.timer=E,m.timer=f.timer=h,d.timer=g.timer=w,t.addEventListener("click",y,!1),e.addEventListener("click",b,!1),a.addEventListener("click",p,!1),r.addEventListener("click",I,!1),u.addEventListener("click",L,!1),o.addEventListener("click",B,!1),c.addEventListener("click",S,!1),m.addEventListener("click",S,!1),d.addEventListener("click",S,!1),v.addEventListener("click",A,!1),f.addEventListener("click",A,!1),g.addEventListener("click",A,!1),i.addEventListener("input",M,!1),l.addEventListener("input",M,!1),s.addEventListener("input",M,!1),window.localStorage){var D=window.localStorage.getItem("last");N(D)}}}})();